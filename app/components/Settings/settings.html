<div class="container">

<div class="protected-settings my-top-content">
    <div class="alert alert-danger col-xs-12" *ngIf="errMsg">{{errMsg}}</div>
    <h1>Update your information</h1>

    <div class="blur">
    <form #nameForm="ngForm" (ngSubmit)="onSubmitName()">
        <h3>Username: {{user.user}}</h3>
        <div class="row">
            <fieldset class="form-group col-lg-4">
            <label for="firstname">First Name</label>
            <div class="input-group">
                <input #firstname="ngModel" type="text" class="form-control" id="InputFirstName" placeholder="" [(ngModel)]="user.firstName" name="firstname" required 
                tooltip="Required"
                tooltipPlacement="right"
                tooltipTrigger=""
                [tooltipEnable]="!firstname.valid && !firstname.pristine"
                [tooltipIsOpen]="!firstname.valid && !firstname.pristine">
                <!--<div [hidden]="firstname.valid || firstname.pristine" class="alert alert-danger input-group-addon">Name is required</div>-->
            </div>
            </fieldset>

            <fieldset class="form-group col-lg-4">
            <label for="lastname">Last Name</label>
            <div class="input-group">
                <input #lastname="ngModel" type="text" class="form-control" id="InputLastName" placeholder="" [(ngModel)]="user.lastName" name="lastname" required
                tooltip="Required"
                tooltipPlacement="right"
                tooltipTrigger=""
                [tooltipEnable]="!lastname.valid && !lastname.pristine"
                [tooltipIsOpen]="!lastname.valid && !lastname.pristine">
                <!--<div [hidden]="lastname.valid || lastname.pristine" class="alert alert-danger input-group-addon">Name is required</div>-->
            </div>
            </fieldset>
        </div>
    
        <div class="row">  
            <fieldset class="form-group col-lg-2">
            <label for="gradyear">Year of graduation</label>
            <div class="input-group">
                <select class="c-select" #gradyear="ngModel" type="gradyear" id="InputGradyear" placeholder="9th grade: 2019" [(ngModel)]="user.gradYear" name ="gradyear" required
                tooltip="Required"
                tooltipPlacement="right"
                tooltipTrigger=""
                [tooltipEnable]="!gradyear.valid && !gradyear.pristine"
                [tooltipIsOpen]="!gradyear.valid && !gradyear.pristine">
                    <option *ngFor="let g of gradeRange" [value]="g" [selected]="g==user.gradYear">{{g}}</option>
                </select>
                <!--<div [hidden]="gradyear.valid || gradyear.pristine" class="alert alert-danger">Year of graduation is required</div>-->
            </div>
            </fieldset>
            <div class="col-lg-2"><h2>OR</h2></div>
            <fieldset class="form-group col-lg-4">
            <div class="checkbox">
                    <label>
                    <input #teacher="ngModel" class="form-control" type="checkbox" id="InputCheckbox" name="teacher" [(ngModel)]="userIsTeacher">Are you a teacher/faculty in MICDS? Check if yes. (Will override year of graduation)
                    </label>
                </div>
            </fieldset>
        </div>

        <button type="submit" class="btn btn-default" [disabled]="!nameForm.form.valid || !valueChanged()">Update</button>
    </form>
    <form #passForm="ngForm" (ngSubmit)="onSubmitPass()">
            <div class="alert alert-danger" *ngIf="passErrMsg">{{passErrMsg}}</div>
        <div class="row">
            <fieldset class="form-group col-lg-4">
                <div class="input-group">
                    <label for="oldPass">Old password</label>
                    <input class="form-control" type="password" [(ngModel)]="oldPass" name="oldPass" required>
                </div>
            </fieldset>
            <fieldset class="form-group col-lg-4">
                <div class="input-group">
                    <label for="newPass">New password</label>
                    <input class="form-control" type="password" [(ngModel)]="newPass" name="newPass" required>
                </div>
            </fieldset>
            <fieldset class="form-group col-lg-4">
                <div class="input-group">
                    <label for="repNewPass">Repeat new password</label>
                    <input class="form-control" type="password" [(ngModel)]="repNewPass" name="repNewPass" required>
                </div>
            </fieldset>
        </div>

        <button type="submit" class="btn btn-default" [disabled]="!passForm.form.valid || !passwordValid()">Update Password</button>
    </form>
    </div>

    <div class="blur">
    <form #urlForm="ngForm" (ngSubmit)="onSubmitURL()">
        <div class="alert alert-danger col-xs-12" *ngIf="errMsg">{{URLerrMsg}}</div>
        <h3>URL Settings</h3>
        <div class="row">
            <fieldset class="form-group col-lg-4">
            <label for="canvasURL">Set Canvas URL</label>
            <div class="input-group">
                <input #canvasURL="ngModel" type="text" class="form-control urlInput" id="InputCanvasURL" placeholder="" [(ngModel)]="user.canvasURL" name="canvasURL"
                tooltip="You wont be able to get the schedule if this is set to empty."
                tooltipPlacement="bottom"
                tooltipTrigger=""
                [tooltipEnable]="!canvasURL.value"
                [tooltipIsOpen]="!canvasURL.value">
                <div class="input-group-addon" *ngIf="testingC">testing...</div> <div class="input-group-addon" *ngIf="validC">Valid!</div> <div class="input-group-addon" *ngIf="!validC">Invalid!</div>
            </div>
            <!--<div [hidden]="canvasURL.value" class="alert alert-warning">You wont be able to get the schedule if this is set to empty.</div>-->
            </fieldset>

            <fieldset class="form-group col-lg-4">
            <label for="portalURL">Set Portal URL</label>
            <div class="input-group">
                <input #portalURL="ngModel" type="text" class="form-control urlInput" id="InputPortalURL" placeholder="" [(ngModel)]="user.portalURL" name="portalURL"
                tooltip="You wont be able to get the planner events from the portal if this is set to empty."
                tooltipPlacement="bottom"
                tooltipTrigger=""
                [tooltipEnable]="!portalURL.value"
                [tooltipIsOpen]="!portalURL.value">
                <div class="input-group-addon" *ngIf="testingP">testing...</div> <div class="input-group-addon" *ngIf="validP">Valid!</div> <div class="input-group-addon" *ngIf="!validP">Invalid!</div>
            </div>
            <!--<div [hidden]="portalURL.value" class="alert alert-warning">You wont be able to get the planner events from the portal if this is set to empty.</div>-->
            </fieldset>
        </div>

        <button type="submit" class="btn btn-default" [disabled]="!(validC && validP)">Update</button>
    </form>
    </div>
</div>

</div>