<div class="container">

<div class="protected-settings my-top-content">
    <div class="alert alert-danger col-xs-12" *ngIf="errMsg">{{errMsg}}</div>
    <h1>Update your information</h1>

    <div class="blur">
    <form #nameForm="ngForm" (ngSubmit)="onSubmitName()">
        <div class="row">
            <h3>Username: {{user.user}}</h3>
        </div>

        <div class="row">
            <fieldset class="form-group col-lg-4">
            <label for="firstname">First Name</label>
            <div class="input-group">
                <input #firstname="ngModel" type="text" class="form-control" id="InputFirstName" placeholder="" [(ngModel)]="user.firstName" name="firstname" required>
                <div [hidden]="firstname.valid || firstname.pristine" class="alert alert-danger input-group-addon">Name is required</div>
            </div>
            </fieldset>

            <fieldset class="form-group col-lg-4">
            <label for="lastname">Last Name</label>
            <div class="input-group">
                <input #lastname="ngModel" type="text" class="form-control" id="InputLastName" placeholder="" [(ngModel)]="user.lastName" name="lastname" required>
                <div [hidden]="lastname.valid || lastname.pristine" class="alert alert-danger input-group-addon">Name is required</div>
            </div>
            </fieldset>
        </div>
    
        <div class="row">  
            <fieldset class="form-group col-lg-4">
            <label for="gradyear">Year of graduation</label>
            <div class="input-group">
                <select class="c-select" #gradyear="ngModel" type="gradyear" id="InputGradyear" placeholder="9th grade: 2019" [(ngModel)]="user.gradYear" name ="gradyear" required>
                    <option *ngFor="let g of gradeRange" [value]="g" [selected]="g==user.gradYear">{{g}}</option>
                </select>
                <div [hidden]="gradyear.valid || gradyear.pristine" class="alert alert-danger">Year of graduation is required</div>
            </div>
            </fieldset>
        </div>

        <button type="submit" class="btn btn-default" [disabled]="!nameForm.form.valid">Update</button>
    </form>
    <form #passForm="ngForm" (ngSubmit)="onSubmitPass()">
        <div class="row">
            <div class="alert alert-danger">{{passErrMsg}}</div>
        </div>
        <div class="row">
            <fieldset class="form-group col-lg-8">
                <div class="input-group">
                    <label for="oldPass">Old password</label>
                    <input #oldPass="ngModel" type="password" [(ngModel)]="oldPass" name="oldPass" required>
                    <label for="newPass">New password</label>
                    <input #newPass="ngModel" type="password" [(ngModel)]="newPass" name="newPass" required>
                    <label for="repNewPass">Repeat new password</label>
                    <input #repNewPass="ngModel" type="password" [(ngModel)]="RepNewPass" name="repNewPass" required>
                </div>
            </fieldset>
            <div class="alert alert-danger" *ngIf="passwordValid()"></div>
        </div>

        <button type="submit" class="btn btn-default" [disabled]="!passForm.form.valid && passwordValid()">Update Password</button>
    </form>
    </div>

    <div class="blur">
    <form #urlForm="ngForm" (ngSubmit)="onSubmitURL()">
        <div class="alert alert-danger col-xs-12" *ngIf="errMsg">{{URLerrMsg}}</div>

        <div class="row">
            <h3>URL Settings</h3>
        </div>

        <div class="row">
            <fieldset class="form-group col-lg-4">
            <label for="canvasURL">Set Canvas URL</label>
            <div class="input-group">
                <input #canvasURL="ngModel" type="text" class="form-control" id="InputCanvasURL" placeholder="" [(ngModel)]="user.canvasURL" name="canvasURL" (ngModelChange)="onChangeCanvasURL($event)">
                <div class="input-group-addon" *ngIf="testingC">testing...</div> <div class="input-group-addon" *ngIf="validC">Valid!</div> <div class="input-group-addon" *ngIf="!validC">Invalid!</div>
            </div>
            <div [hidden]="canvasURL.value" class="alert alert-warning">You wont be able to get the schedule if this is set to empty.</div>
            </fieldset>

            <fieldset class="form-group col-lg-4">
            <label for="portalURL">Set Portal URL</label>
            <div class="input-group">
                <input #portalURL="ngModel" type="text" class="form-control" id="InputPortalURL" placeholder="" [(ngModel)]="user.portalURL" name="portalURL" (ngModelChange)="onChangePortalURL($event)">
                <div class="input-group-addon" *ngIf="testingP">testing...</div> <div class="input-group-addon" *ngIf="validP">Valid!</div> <div class="input-group-addon" *ngIf="!validP">Invalid!</div>
            </div>
            <div [hidden]="portalURL.value" class="alert alert-warning">You wont be able to get the planner events from the portal if this is set to empty.</div>
            </fieldset>
        </div>

        <button type="submit" class="btn btn-default" [disabled]="!(validC && validP)">Update</button>
    </form>
    </div>
</div>

</div>